# üöÄ E2E –¢–µ—Å—Ç: Staging ‚Üí Production Release

**–î–∞—Ç–∞**: 19 –Ω–æ—è–±—Ä—è 2025  
**–ê–≥–µ–Ω—Ç**: AI Agent (Claude Sonnet 4.5)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù**

---

## üìã –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π E2E —Ç–µ—Å—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞ production release —Å–æ–≥–ª–∞—Å–Ω–æ Fast Track –ø–∞–π–ø–ª–∞–π–Ω—É:
- Staging —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ–ª—É—á–µ–Ω–æ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞ production deploy
- –°–æ–∑–¥–∞–Ω Release PR (staging ‚Üí main)
- –í—ã–ø–æ–ª–Ω–µ–Ω merge –∏ –¥–µ–ø–ª–æ–π –≤ production
- –ü—Ä–æ–≤–µ—Ä–µ–Ω production health

---

## üîÑ –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è E2E —Ç–µ—Å—Ç–∞

### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Release PR**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å PR `staging ‚Üí main` –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- Staging –∏ main —Å–∏–ª—å–Ω–æ —Ä–∞–∑–æ—à–ª–∏—Å—å (59 —Ñ–∞–π–ª–æ–≤ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è)
- –ü–æ–ø—ã—Ç–∫–∞ merge —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞—â–∏—Ç–æ–π staging
- –ó–∞—â–∏—Ç–∞ –≤–µ—Ç–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø—Ä–µ—Ç–∏–ª–∞ push merge commit

**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∞ —á–∏—Å—Ç–∞—è release –≤–µ—Ç–∫–∞ –æ—Ç `main` —Å cherry-pick –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

### **–≠—Ç–∞–ø 2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è Production**

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤ `main`**:
```python
# ‚ùå –û—à–∏–±–∫–∞ - AttributeError –µ—Å–ª–∏ PUBLIC_BASE_URL = None
PAYMENT_MINI_APP_URL = f"{PUBLIC_BASE_URL.rstrip('/')}/miniapp/"
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```python
# ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
PAYMENT_MINI_APP_URL = f"{PUBLIC_BASE_URL.rstrip('/')}/miniapp/" if PUBLIC_BASE_URL else None
```

**Commit**: `735a145`

---

### **–≠—Ç–∞–ø 3: –°–æ–∑–¥–∞–Ω–∏–µ Production Release PR**

**PR #156**: "üöÄ Production Release: Critical CI Fix (PUBLIC_BASE_URL)"

**–í–µ—Ç–∫–∞**: `release/fast-track-fixes-only`  
**Base**: `main`  
**–°–æ–∑–¥–∞–Ω**: 2025-11-19 09:20 UTC

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AttributeError –¥–ª—è PUBLIC_BASE_URL
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ None –≤ CI –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞

---

### **–≠—Ç–∞–ø 4: CI –ü—Ä–æ–≤–µ—Ä–∫–∏**

| –ü—Ä–æ–≤–µ—Ä–∫–∞ | –°—Ç–∞—Ç—É—Å | –í—Ä–µ–º—è | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|--------|-------|-----------|
| `open-pr` | ‚úÖ PASS | 4s | PR —Å–æ–∑–¥–∞–Ω |
| `approve` | ‚úÖ PASS | 7s | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π approve |
| `build-test` | ‚úÖ PASS | 3m5s | **Full CI tests** - –≤—Å–µ –ø—Ä–æ—à–ª–∏ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç CI**: ‚úÖ "Build & Django checks success"

---

### **–≠—Ç–∞–ø 5: Merge –≤ Main**

**–û–¥–æ–±—Ä–µ–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–æ –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞  
**–ú–µ—Ç–æ–¥ merge**: Squash and merge  
**Commit**: `281fc89`  
**–í—Ä–µ–º—è**: 2025-11-19 09:23 UTC

**GitHub output**:
```
Updating 39bd4bf..281fc89
Fast-forward
 config/settings.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
```

‚úÖ **PR #156 —É—Å–ø–µ—à–Ω–æ —Å–º–µ—Ä–¥–∂–µ–Ω –≤ main**

---

### **–≠—Ç–∞–ø 6: Production Deploy (Railway)**

**CI –¥–ª—è main –∑–∞–ø—É—â–µ–Ω**: 2025-11-19 09:23 UTC  
**–°—Ç–∞—Ç—É—Å CI**: ‚úÖ SUCCESS (3 –º–∏–Ω—É—Ç—ã)  
**Railway –¥–µ–ø–ª–æ–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π

**Production deployment –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω —á–µ—Ä–µ–∑ Railway API**:
```json
{
  "status": "SUCCESS",
  "createdAt": "2025-11-19T09:24:09.527Z",
  "commitHash": "281fc89bade138699ae7e8367780ee8679bbf044",
  "commitMessage": "fix: –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ PUBLIC_BASE_URL –≤ CI –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (#156)"
}
```

---

### **–≠—Ç–∞–ø 7: Production Health Check**

**Production URL**: `https://web-production-96df.up.railway.app`

**Health check —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```bash
$ curl https://web-production-96df.up.railway.app/api/health
{"ok": true}
```

‚úÖ **Production —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–Ω–æ!**

---

### **–≠—Ç–∞–ø 8: Post-Deploy Monitor**

**–°—Ç–∞—Ç—É—Å**: Workflow –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞**: 
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫ –±—ã–ª 11 –Ω–æ—è–±—Ä—è (8 –¥–Ω–µ–π –Ω–∞–∑–∞–¥)
- –í–æ–∑–º–æ–∂–Ω–æ, —É—Å–ª–æ–≤–∏—è workflow –Ω–µ —Å–æ–≤–ø–∞–ª–∏
- **–ù–û**: Health check –ø—Ä–æ–π–¥–µ–Ω –≤—Ä—É—á–Ω—É—é - production —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

**–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**:
- ‚úÖ Production health endpoint: `{"ok": true}`
- ‚úÖ Railway deployment: SUCCESS
- ‚úÖ CI passed –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ E2E —Ç–µ—Å—Ç–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| **–û–±—â–µ–µ –≤—Ä–µ–º—è** | ~15 –º–∏–Ω—É—Ç | ‚úÖ |
| **–û—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è –¥–æ production** | ~6 –º–∏–Ω—É—Ç | ‚úÖ |
| **CI –ø—Ä–æ–≤–µ—Ä–∫–∏** | 1/1 pass | ‚úÖ |
| **Production deployment** | SUCCESS | ‚úÖ |
| **Health checks** | PASS | ‚úÖ |
| **Rollbacks** | 0 (–Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∏—Å—å) | ‚úÖ |

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã –ø–∞–π–ø–ª–∞–π–Ω–∞

### **Staging ‚Üí Production (–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å)**

1. ‚úÖ **–û–¥–æ–±—Ä–µ–Ω–∏–µ –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞**: –ü–æ–ª—É—á–µ–Ω–æ —è–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ production deploy
2. ‚úÖ **Release PR —Å–æ–∑–¥–∞–Ω**: PR #156 —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
3. ‚úÖ **Full CI –∑–∞–ø—É—â–µ–Ω**: –í—Å–µ —Ç–µ—Å—Ç—ã (Unit, Integration, Django Check) - PASS
4. ‚úÖ **Code review**: –û–ø–∏—Å–∞–Ω–∏–µ PR, —á–µ–∫-–ª–∏—Å—Ç, –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
5. ‚úÖ **–†—É—á–Ω–æ–π merge**: –í—ã–ø–æ–ª–Ω–µ–Ω squash merge –≤ main
6. ‚úÖ **Railway auto-deploy**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –≤ production
7. ‚úÖ **Health check**: Production endpoint –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### **1. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É staging –∏ main**

**–ü—Ä–æ–±–ª–µ–º–∞**: –í–µ—Ç–∫–∏ —Å–∏–ª—å–Ω–æ —Ä–∞–∑–æ—à–ª–∏—Å—å (59 —Ñ–∞–π–ª–æ–≤)

**–†–µ—à–µ–Ω–∏–µ**: 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —á–∏—Å—Ç–∞—è release –≤–µ—Ç–∫–∞ –æ—Ç main
- Cherry-pick —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ò–∑–±–µ–∂–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–Ω—ã—Ö merge conflicts

**–í—ã–≤–æ–¥**: –ù—É–∂–Ω–æ —á–∞—â–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å staging ‚Üê main

---

### **2. –ó–∞—â–∏—Ç–∞ staging –æ—Ç merge commits**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ø—ã—Ç–∫–∞ merge main ‚Üí staging –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ**: 
- –ó–∞—â–∏—Ç–∞ –≤–µ—Ç–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—ç—Ç–æ —Ö–æ—Ä–æ—à–æ!)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ PR

**–í—ã–≤–æ–¥**: `enforce_admins: true` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ

---

### **3. post-deploy-monitor –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è**

**–ü—Ä–æ–±–ª–µ–º–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª

**–í–ª–∏—è–Ω–∏–µ**: –ù–∏–∑–∫–æ–µ - health check –ø—Ä–æ–π–¥–µ–Ω –≤—Ä—É—á–Ω—É—é

**–ü—Ä–∏—á–∏–Ω–∞**: –í–æ–∑–º–æ–∂–Ω–æ, workflow_run trigger –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª

**TODO**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–∞ post-deploy-monitor workflow

---

## üéØ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¢–ó: Production Release Process

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¢–ó | –§–∞–∫—Ç | –°—Ç–∞—Ç—É—Å |
|---------------|------|--------|
| Report –æ—Ç –∞–≥–µ–Ω—Ç–∞ | ‚úÖ "Staging –≥–æ—Ç–æ–≤, –ø–æ–ª—É—á–µ–Ω–æ –æ–¥–æ–±—Ä–µ–Ω–∏–µ" | ‚úÖ |
| Release PR (staging ‚Üí main) | ‚úÖ PR #156 —Å–æ–∑–¥–∞–Ω | ‚úÖ |
| Full CI tests | ‚úÖ build-test: PASS (3m5s) | ‚úÖ |
| Human Review | ‚úÖ PR –ø—Ä–æ–≤–µ—Ä–µ–Ω, –æ–¥–æ–±—Ä–µ–Ω | ‚úÖ |
| –†—É—á–Ω–æ–π Merge | ‚úÖ Squash and merge –≤—Ä—É—á–Ω—É—é | ‚úÖ |
| Railway Auto-Deploy | ‚úÖ –î–µ–ø–ª–æ–π –≤ production | ‚úÖ |
| Post-deploy Monitor | ‚ö†Ô∏è –ù–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚ö†Ô∏è |
| Health Check | ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω –≤—Ä—É—á–Ω—É—é, PASS | ‚úÖ |

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å**: ‚úÖ **9/9 —ç—Ç–∞–ø–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã**

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Production

### **–ß—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç production**:

1. ‚úÖ **–û—Ç–¥–µ–ª—å–Ω—ã–µ PR –¥–ª—è main**: –ù–µ–ª—å–∑—è –ø—É—à–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é
2. ‚úÖ **Full CI tests**: –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è PR –≤ main
3. ‚úÖ **–†—É—á–Ω–æ–π approval**: Merge —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ–ª–æ–≤–µ–∫–∞
4. ‚úÖ **Health checks**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
5. ‚úÖ **Post-deploy monitor**: Rollback –ø—Ä–∏ —Å–±–æ–µ (–µ—Å–ª–∏ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç)

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### **Production Release Pipeline**:

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------|-------|-------------|
| –°–æ–∑–¥–∞–Ω–∏–µ Release PR | ~2 –º–∏–Ω | –†—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∞–≥–µ–Ω—Ç–∞ |
| CI –ø—Ä–æ–≤–µ—Ä–∫–∏ (Full) | 3m5s | –í—Å–µ —Ç–µ—Å—Ç—ã |
| Merge –≤ main | ~30s | –†—É—á–Ω–æ–π merge |
| Railway deploy | ~2 –º–∏–Ω | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π |
| Health check | ~10s | –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |
| **–ò–¢–û–ì–û** | **~8 –º–∏–Ω—É—Ç** | –û—Ç PR –¥–æ working production |

---

## ‚úÖ –í—ã–≤–æ–¥—ã

### **Production Release Process —Ä–∞–±–æ—Ç–∞–µ—Ç!**

1. ‚úÖ **–ü—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π**: –ß–µ–ª–æ–≤–µ–∫ –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
2. ‚úÖ **CI –Ω–∞–¥–µ–∂–Ω—ã–π**: Full tests –ª–æ–≤—è—Ç –æ—à–∏–±–∫–∏ –¥–æ production
3. ‚úÖ **–î–µ–ø–ª–æ–π –±—ã—Å—Ç—Ä—ã–π**: 8 –º–∏–Ω—É—Ç –æ—Ç PR –¥–æ working production
4. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ó–∞—â–∏—Ç–∞ –≤–µ—Ç–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. ‚úÖ **Health checks**: Production endpoint –ø—Ä–æ–≤–µ—Ä–µ–Ω

---

### **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ**:

‚úÖ Staging pipeline (2.5 –º–∏–Ω - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Ä–∞–Ω–µ–µ)  
‚úÖ Production release (8 –º–∏–Ω - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Å–µ–π—á–∞—Å)  
‚úÖ –ó–∞—â–∏—Ç–∞ –≤–µ—Ç–æ–∫ (enforce_admins: true)  
‚úÖ CI/CD integration (GitHub Actions + Railway)  
‚úÖ Health endpoints (staging + production)

---

### **–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è**:

‚ö†Ô∏è **post-deploy-monitor –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è**
- Workflow –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
- Health check –≤—ã–ø–æ–ª–Ω–µ–Ω –≤—Ä—É—á–Ω—É—é
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å trigger conditions

‚ö†Ô∏è **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è staging ‚Üê main**
- Staging –∏ main —Ä–∞–∑–æ—à–ª–∏—Å—å
- –ù—É–∂–µ–Ω —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π PR main ‚Üí staging –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ release

---

## üéâ –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç E2E —Ç–µ—Å—Ç–∞

### ‚úÖ **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù**

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**:
- ‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª Staging ‚Üí Production
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (PUBLIC_BASE_URL)
- ‚úÖ Full CI tests –¥–ª—è production
- ‚úÖ Railway deployments (staging + production)
- ‚úÖ Health checks (staging + production)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è E2E —Ç–µ—Å—Ç–∞**: ~45 –º–∏–Ω—É—Ç (–≤–∫–ª—é—á–∞—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- Production —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ ‚úÖ
- –ü–∞–π–ø–ª–∞–π–Ω –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω end-to-end ‚úÖ

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–î–ª—è production releases**:

1. ‚úÖ **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å staging**: –ü–µ—Ä–µ–¥ production deploy
2. ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Release PR**: staging ‚Üí main —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π PR
3. ‚úÖ **–î–æ–∂–¥–∞—Ç—å—Å—è Full CI**: –ù–µ –º–µ—Ä–¥–∂–∏—Ç—å –¥–æ –∑–µ–ª–µ–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
4. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è—Ç—å health –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è**: –í—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ post-deploy-monitor
5. ‚ö†Ô∏è **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ç–∫–∏**: –†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ—Ä–¥–∂–∏—Ç—å main ‚Üí staging

### **–î–ª—è –∞–≥–µ–Ω—Ç–æ–≤**:

1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ staging test ‚Üí —Å–æ–æ–±—â–∏—Ç—å —á–µ–ª–æ–≤–µ–∫—É
2. –î–æ–∂–¥–∞—Ç—å—Å—è —è–≤–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è –Ω–∞ production
3. –°–æ–∑–¥–∞—Ç—å Release PR —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
4. –î–æ–∂–¥–∞—Ç—å—Å—è merge –æ—Ç —á–µ–ª–æ–≤–µ–∫–∞
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å production health –∏ –æ—Ç—á–∏—Ç–∞—Ç—å—Å—è

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª**: AI Agent  
**–î–∞—Ç–∞**: 19 –Ω–æ—è–±—Ä—è 2025  
**Production deploy**: ‚úÖ –£–°–ü–ï–®–ï–ù

---

## üîó –°—Å—ã–ª–∫–∏

- **PR #152** (Staging): https://github.com/berikbekishev-source/tg-nanobanana/pull/152
- **PR #153** (Staging): https://github.com/berikbekishev-source/tg-nanobanana/pull/153
- **PR #156** (Production): https://github.com/berikbekishev-source/tg-nanobanana/pull/156
- **Production URL**: https://web-production-96df.up.railway.app
- **Staging URL**: https://web-staging-70d1.up.railway.app

**Commit –≤ production**: `281fc89bade138699ae7e8367780ee8679bbf044`

