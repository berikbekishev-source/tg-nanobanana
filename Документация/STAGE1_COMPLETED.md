# ‚úÖ –≠—Ç–∞–ø 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - –ó–ê–í–ï–†–®–ï–ù

## üìä –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ Django —Å–æ–∑–¥–∞–Ω—ã:
- **TgUser** - —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏ (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, —è–∑—ã–∫, –ø—Ä–µ–º–∏—É–º —Å—Ç–∞—Ç—É—Å)
- **UserBalance** - –±–∞–ª–∞–Ω—Å –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **AIModel** - –∫–∞—Ç–∞–ª–æ–≥ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö AI –º–æ–¥–µ–ª–µ–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **Transaction** - –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **UserSettings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Promocode** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- **GenRequest** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### 2. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞:
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –≤ Django Admin
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 3. –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–ª–∞–Ω—Å–æ–º:
- **BalanceService** - –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–º:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
  - –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
  - –ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
  - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
  - –í–æ–∑–≤—Ä–∞—Ç—ã —Å—Ä–µ–¥—Å—Ç–≤
- **GenerationService** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –±–∞–ª–∞–Ω—Å–∞:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
  - –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –∏ –æ–ø—ã—Ç–∞

### 4. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- `0002_aimodel_promocode_transaction_userbalance_and_more.py` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- `0003_add_initial_ai_models.py` - –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è AI –º–æ–¥–µ–ª–µ–π

### 5. –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã:
- **–ú–æ–¥–µ–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
  - üçå Nano Banana (1.5 —Ç–æ–∫–µ–Ω–∞) - –∞–∫—Ç–∏–≤–Ω–∞
  - üé® Imagen 3.0 (3 —Ç–æ–∫–µ–Ω–∞) - –≥–æ—Ç–æ–≤–∞ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- **–ú–æ–¥–µ–ª–∏ –≤–∏–¥–µ–æ:**
  - ‚ö° Veo 3.1 Fast (19 —Ç–æ–∫–µ–Ω–æ–≤) - –∞–∫—Ç–∏–≤–Ω–∞
  - üé¨ Veo 3.1 Pro (49 —Ç–æ–∫–µ–Ω–æ–≤) - –≥–æ—Ç–æ–≤–∞ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- **–ü—Ä–æ–º–æ–∫–æ–¥—ã:**
  - WELCOME2025 - 10 —Ç–æ–∫–µ–Ω–æ–≤ –±–æ–Ω—É—Å
  - FIRST50 - 50% —Å–∫–∏–¥–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–π:

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install -r requirements.txt

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# 3. –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
python manage.py createsuperuser

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
python manage.py runserver
```

### –î–ª—è Railway –¥–µ–ø–ª–æ—è:
```bash
# 1. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "feat: Stage 1 - Database models and balance system"

# 2. –ó–∞–ø—É—à—å—Ç–µ –≤ Railway
git push

# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
```

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 1:

```
botapp/
‚îú‚îÄ‚îÄ models.py              # ‚úÖ –í—Å–µ –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã
‚îú‚îÄ‚îÄ admin.py               # ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
‚îú‚îÄ‚îÄ services/              # ‚úÖ –ù–æ–≤–∞—è –ø–∞–ø–∫–∞ —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ balance.py         # –°–µ—Ä–≤–∏—Å –±–∞–ª–∞–Ω—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ generation.py      # –°–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ migrations/            # ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ 0001_initial.py
‚îÇ   ‚îú‚îÄ‚îÄ 0002_aimodel_promocode_transaction_userbalance_and_more.py
‚îÇ   ‚îî‚îÄ‚îÄ 0003_add_initial_ai_models.py
‚îî‚îÄ‚îÄ api.py                 # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç ImportError
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–≠—Ç–∞–ø 2):

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ FSM –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –º–µ–Ω—é –±–æ—Ç–∞:
1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM (–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –±–∞–ª–∞–Ω—Å)
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –±–∞–ª–∞–Ω—Å–∞

### –ß—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞—Ç—å:
- `botapp/keyboards.py` - –≤—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ—Ç–∞
- `botapp/states.py` - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `botapp/handlers/` - –ø–∞–ø–∫–∞ —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏:
  - `menu.py` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
  - `generation.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - `balance.py` - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–ª–∞–Ω—Å–æ–º
  - `payment.py` - –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

## üí° –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏:

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–ª–∞–Ω—Å–æ–º –∞—Ç–æ–º–∞—Ä–Ω—ã–µ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç @transaction.atomic)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ F-expressions
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª—è—Ö –ë–î
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å select_related
- –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è 100k MAU

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –ö–æ–¥ –∑–∞—â–∏—â–µ–Ω –æ—Ç ImportError (–µ—Å–ª–∏ aiogram/celery –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ –ø–æ–ª–µ `model` –≤ GenRequest
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å (reverse —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç:

- [x] –ú–æ–¥–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ê–¥–º–∏–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
- [x] –°–µ—Ä–≤–∏—Å—ã –±–∞–ª–∞–Ω—Å–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [x] –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é
- [x] –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] –ö–æ–¥ –∑–∞—â–∏—â–µ–Ω –æ—Ç –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

**–≠—Ç–∞–ø 1 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!** üéâ

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≠—Ç–∞–ø–∞ 2 - FSM –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é.